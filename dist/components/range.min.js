/*!
 * # Range slider for Semantic UI.
 *
 */
!function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.range=function(t){var i,a=e(this),r=a.selector||"",s=(new Date).getTime(),u=[],l=arguments[0],c="string"==typeof l,d=[].slice.call(arguments,1),f=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];return a.each(function(){var a,m,g,v,p,b,h,k,y=e.isPlainObject(t)?e.extend(!0,{},e.fn.range.settings,t):e.extend({},e.fn.range.settings),P=(y.className,y.metadata),T=y.namespace,x=y.input,w=y.error,E="."+T,S="module-"+T,M=e(this),O=this,D=M.data(S);k={initialize:function(){k.debug("Initializing range slider",y),h=k.get.isTouch(),k.setup.layout(),k.is.disabled()||k.bind.events(),k.read.metadata(),k.read.settings(),k.instantiate()},instantiate:function(){k.verbose("Storing instance of range",k),D=k,M.data(S,k)},destroy:function(){k.verbose("Destroying previous range for",M),clearInterval(D.interval),k.unbind.events(),k.unbind.documentEvents(),M.removeData(S),D=o},setup:{layout:function(){0==M.find(".inner").length&&M.append("<div class='inner'><div class='track'></div><div class='track-fill'></div><div class='thumb'></div></div>"),b=k.get.precision(),a=M.find(".thumb"),m=M.find(".track"),g=M.find(".track-fill"),p=a.width()/2,k.is.labeled()&&(v=M.find(".labels:not(.auto)"),0!=v.length?k.setup.customLabel():k.setup.autoLabel())},customLabel:function(){var t,n,o=v.find(".label"),i=o.length;o.each(function(o){t=(o+1)/(i+1),n=k.determine.positionFromRatio(t),e(this).css(k.is.reversed()?"right":"left",n)})},autoLabel:function(){if(0!=k.get.step()){v=M.find(".labels"),0!=v.length?v.empty():v=M.append('<ul class="auto labels"></ul>').find(".labels");for(var t=0;t<=k.get.numLabels();t++){var n=e('<li class="label">'+k.get.label(t+1)+"</li>");n.css(k.is.reversed()?"right":"left",k.determine.positionFromValue((t+1)*k.get.step())),v.append(n)}}}},bind:{events:function(){M.find(".track, .thumb, .inner").on("mousedown"+E,function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).closest(".range").trigger("mousedown"+E,t),k.event.down(t)}),M.on("mousedown"+E,k.event.down),k.get.isTouch()&&(M.find(".track, .thumb, .inner").on("touchstart"+E,function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).closest(".range").trigger("touchstart"+E,t),k.event.down(t)}),M.on("touchstart"+E,k.event.down))},documentEvents:function(){k.get.isTouch()?(e(n).on("touchmove"+E,k.event.move),e(n).on("touchend"+E,k.event.up)):(e(n).on("mousemove"+E,k.event.move),e(n).on("mouseup"+E,k.event.up))}},unbind:{events:function(){M.find(".track, .thumb, .inner").off("mousedown"+E),M.find(".track, .thumb, .inner").off("touchstart"+E),M.off("mousedown"+E),M.off("touchstart"+E)},documentEvents:function(){k.get.isTouch()?(e(n).off("touchmove"+E),e(n).off("touchend"+E)):(e(n).off("mousemove"+E),e(n).off("mouseup"+E))}},event:{down:function(e,t){e.preventDefault(),k.is.disabled()||k.bind.documentEvents()},move:function(e,t){e.preventDefault();var n=k.determine.eventXPos(e,t),o=k.determine.pos(n);n>=k.get.trackOffset()&&n<=k.get.trackOffset()+k.get.trackWidth()&&k.set.valueBasedPosition(o)},up:function(e,t){e.preventDefault();var n=k.determine.eventXPos(e,t),o=k.determine.pos(n);n>=k.get.trackOffset()&&n<=k.get.trackOffset()+k.get.trackWidth()&&k.set.valueMoveToValueBasedPosition(o),k.unbind.documentEvents()}},is:{disabled:function(){return M.hasClass(y.className.disabled)},labeled:function(){return M.hasClass(y.className.labeled)},reversed:function(){return M.hasClass(y.className.reversed)}},get:{isTouch:function(){try{return n.createEvent("TouchEvent"),!0}catch(e){return!1}},trackOffset:function(){return m.offset().left},trackWidth:function(){return m.width()},trackLeft:function(){return m.position().left},trackStartPos:function(){return k.is.reversed()?k.get.trackLeft()+k.get.trackWidth():k.get.trackLeft()},trackEndPos:function(){return k.is.reversed()?k.get.trackLeft():k.get.trackLeft()+k.get.trackWidth()},precision:function(){var e,t=k.get.step();if(0!=t){var n=String(t).split(".");e=2==n.length?n[1].length:0}else e=y.decimalPlaces;var o=Math.pow(10,e);return k.debug("Precision determined",o),o},min:function(){return y.min},max:function(){return y.max},step:function(){return y.step},numLabels:function(){var e=Math.round((k.get.max()-k.get.min())/k.get.step())-2;return k.debug("Determined that their should be "+e+" labels"),e},labelType:function(){return y.labelType},label:function(e){switch(y.labelType){case y.labelTypes.number:return e*k.get.step();case y.labelTypes.letter:return f[e-1];case y.labelTypes.none:return"";default:return e}}},determine:{pos:function(e){return k.is.reversed()?k.get.trackStartPos()-e+k.get.trackOffset():e-k.get.trackOffset()-k.get.trackStartPos()},value:function(e){var t=k.is.reversed()?k.get.trackEndPos():k.get.trackStartPos(),n=k.is.reversed()?k.get.trackStartPos():k.get.trackEndPos(),o=(e-t)/(n-t),i=k.get.max()-k.get.min(),a=k.get.step(),r=o*i,s=0==a?r:Math.round(r/a)*a;return k.verbose("Determined value based upon position: "+e+" as: "+r),r!=s&&k.verbose("Rounding value to closest step: "+s),s=Math.round(s*b)/b,k.verbose("Cutting off additional decimal places"),s-k.get.min()},positionFromValue:function(e){var t=k.get.min(),n=k.get.max(),o=k.get.trackWidth(),i=(e-t)/(n-t),a=k.is.reversed()?o-(g.position().left+g.width()):g.position().left,r=Math.round(i*o)+a;return k.verbose("Determined position: "+r+" from value: "+e),r},positionFromRatio:function(e){var t=k.get.trackWidth(),n=k.is.reversed()?t-(g.position().left+g.width()):g.position().left,o=k.get.step(),i=Math.round(e*t)+n,a=0==o?i:Math.round(i/o)*o;return a},eventXPos:function(e,t){return h?t.originalEvent.touches[0].pageX:"undefined"!=typeof e.pageX?e.pageX:t.pageX}},set:{value:function(t){x&&e(x).val(t),y.onChange.call(O,t),k.debug("Setting range value to "+t)},position:function(e){k.is.reversed()?a.css({right:String(e-p)+"px"}):a.css({left:String(e-p)+"px"}),g.css({width:String(e)+"px"}),k.position=e,k.debug("Setting range position to "+e)},positionBasedValue:function(e){var t=k.get.min(),n=k.get.max();if(e>=t&&n>=e){var o=k.determine.positionFromValue(e);k.set.position(o),k.set.value(e)}else t>=e?(k["goto"].min(),k.set.value(t)):(k["goto"].max(),k.set.value(n))},valueMoveToValueBasedPosition:function(e){var t,n=k.determine.value(e),o=k.get.min(),i=k.get.max();o>=n?n=o:n>=i&&(n=i),t=k.determine.positionFromValue(n),k.set.value(n),k.set.position(t)},valueBasedPosition:function(e){var t=k.determine.value(e),n=k.get.min(),o=k.get.max();t>=n&&o>=t?k.set.position(e):n>=t?(k["goto"].min(),t=n):(k["goto"].max(),t=o),k.set.value(t)}},"goto":{max:function(){k.set.position(k.get.trackEndPos())},min:function(){k.set.position(k.get.trackStartPos())}},remove:{state:function(){k.verbose("Removing stored state"),delete k.value}},read:{metadata:function(){var e={value:M.data(P.value)};e.value&&(k.debug("Current value set from metadata",e.value),k.set.value(e.value),k.set.positionBasedValue(e.value))},settings:function(){y.start!==!1&&(k.debug("Start position set from settings",y.start),k.set.positionBasedValue(y.start))}},setting:function(t,n){if(k.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,y,t);else{if(n===o)return y[t];e.isPlainObject(y[t])?e.extend(!0,y[t],n):y[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,k,t);else{if(n===o)return k[t];k[t]=n}},debug:function(){!y.silent&&y.debug&&(y.performance?k.performance.log(arguments):(k.debug=Function.prototype.bind.call(console.info,console,y.name+":"),k.debug.apply(console,arguments)))},verbose:function(){!y.silent&&y.verbose&&y.debug&&(y.performance?k.performance.log(arguments):(k.verbose=Function.prototype.bind.call(console.info,console,y.name+":"),k.verbose.apply(console,arguments)))},error:function(){y.silent||(k.error=Function.prototype.bind.call(console.error,console,y.name+":"),k.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;y.performance&&(t=(new Date).getTime(),o=s||t,n=t-o,s=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:O,"Execution Time":n})),clearTimeout(k.performance.timer),k.performance.timer=setTimeout(k.performance.display,500)},display:function(){var t=y.name+":",n=0;s=!1,clearTimeout(k.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(console.group!==o||console.table!==o)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,a){var r,s,u,l=D;return n=n||d,a=O||a,"string"==typeof t&&l!==o&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,i){var a=n!=r?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==o)return s=l[a],!1;if(!e.isPlainObject(l[i])||n==r)return l[i]!==o?(s=l[i],!1):(k.error(w.method,t),!1);l=l[i]}})),e.isFunction(s)?u=s.apply(a,n):s!==o&&(u=s),e.isArray(i)?i.push(u):i!==o?i=[i,u]:u!==o&&(i=u),s}},c?(D===o&&k.initialize(),k.invoke(l)):(D!==o&&D.invoke("destroy"),k.initialize())}),i!==o?i:this},e.fn.range.settings={silent:!1,debug:!1,verbose:!1,performance:!0,name:"Range",namespace:"range",error:{method:"The method you called is not defined."},metadata:{value:"value"},min:0,max:20,step:1,start:0,input:!1,labelType:"number",decimalPlaces:2,className:{reversed:"reversed",disabled:"disabled",labeled:"labeled"},labelTypes:{number:"number",none:"none",letter:"letter"},onChange:function(e){}}}(jQuery,window,document);
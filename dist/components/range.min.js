/*!
 * # Range slider for Semantic UI.
 *
 */
!function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.range=function(t){var i,r=e(this),s=r.selector||"",a=(new Date).getTime(),u=[],l=arguments[0],c="string"==typeof l,d=[].slice.call(arguments,1),f=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];return r.each(function(){var r,g,p,v,m,b,h,k,w,y,P=e.isPlainObject(t)?e.extend(!0,{},e.fn.range.settings,t):e.extend({},e.fn.range.settings),x=(P.className,P.metadata),E=P.namespace,T=P.input,S=P.error,L=P.keys,A=P.pageMultiplier,B=!1,D="."+E,M="module-"+E,O=e(this),V=this,F=O.data(M);y={initialize:function(){y.debug("Initializing range slider",P),w=y.setup.testOutTouch(),y.setup.layout(),y.is.disabled()||y.bind.events(),y.read.metadata(),y.read.settings(),y.instantiate()},instantiate:function(){y.verbose("Storing instance of range",y),F=y,O.data(M,y)},destroy:function(){y.verbose("Destroying previous range for",O),clearInterval(F.interval),y.unbind.events(),y.unbind.slidingEvents(),O.removeData(M),F=o},setup:{layout:function(){O.attr("tabindex")===o&&O.attr("tabindex",0),0==O.find(".inner").length&&O.append("<div class='inner'><div class='track'></div><div class='track-fill'></div><div class='thumb'></div></div>"),k=y.get.precision(),r=O.find(".thumb"),g=O.find(".track"),p=O.find(".track-fill"),h=r.width()/2,y.is.labeled()&&(v=O.find(".labels:not(.auto)"),0!=v.length?y.setup.customLabel():y.setup.autoLabel())},testOutTouch:function(){try{return n.createEvent("TouchEvent"),!0}catch(e){return!1}},customLabel:function(){var t,n,o=v.find(".label"),i=o.length;o.each(function(o){t=(o+1)/(i+1),n=y.determine.positionFromRatio(t);var r=y.is.vertical()?y.is.reversed()?"bottom":"top":y.is.reversed()?"right":"left";e(this).css(r,n)})},autoLabel:function(){if(0!=y.get.step()){v=O.find(".labels"),0!=v.length?v.empty():v=O.append('<ul class="auto labels"></ul>').find(".labels");for(var t=0;t<=y.get.numLabels();t++){var n=e('<li class="label">'+y.get.label(t+1)+"</li>"),o=y.is.vertical()?y.is.reversed()?"bottom":"top":y.is.reversed()?"right":"left";n.css(o,y.determine.positionFromValue((t+1)*y.get.step())),v.append(n)}}}},bind:{events:function(){y.bind.keyboardEvents(),y.bind.mouseEvents(),y.is.touch()&&y.bind.touchEvents()},keyboardEvents:function(){y.verbose("Binding keyboard events"),O.on("keydown"+D,y.event.keydown)},mouseEvents:function(){y.verbose("Binding mouse events"),O.find(".track, .thumb, .inner").on("mousedown"+D,function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).closest(".range").trigger("mousedown"+D,t),y.event.down(t)}),O.on("mousedown"+D,y.event.down),O.on("mouseover"+D,function(){B=!0,O.focus()}),O.on("mouseout"+D,function(){B=!1,O.blur()})},touchEvents:function(){y.verbose("Binding touch events"),O.find(".track, .thumb, .inner").on("touchstart"+D,function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).closest(".range").trigger("touchstart"+D,t),y.event.down(t)}),O.on("touchstart"+D,y.event.down)},slidingEvents:function(){y.verbose("Binding page wide events while handle is being draged"),y.is.touch()?(e(n).on("touchmove"+D,y.event.move),e(n).on("touchend"+D,y.event.up)):(e(n).on("mousemove"+D,y.event.move),e(n).on("mouseup"+D,y.event.up))}},unbind:{events:function(){O.find(".track, .thumb, .inner").off("mousedown"+D),O.find(".track, .thumb, .inner").off("touchstart"+D),O.off("mousedown"+D),O.off("mouseover"+D),O.off("mouseout"+D),O.off("touchstart"+D),O.off("keydown"+D)},slidingEvents:function(){y.is.touch()?(e(n).off("touchmove"+D),e(n).off("touchend"+D)):(e(n).off("mousemove"+D),e(n).off("mouseup"+D))}},event:{down:function(e,t){e.preventDefault(),y.is.disabled()||y.bind.slidingEvents()},move:function(e,t){e.preventDefault();var n=y.determine.eventPos(e,t),o=y.determine.pos(n);n>=y.get.trackOffset()&&n<=y.get.trackOffset()+y.get.trackLength()&&y.set.valueBasedPosition(o)},up:function(e,t){e.preventDefault();var n=y.determine.eventPos(e,t),o=y.determine.pos(n);n>=y.get.trackOffset()&&n<=y.get.trackOffset()+y.get.trackLength()&&y.set.valueMoveToValueBasedPosition(o),y.unbind.slidingEvents()},keydown:function(e){if(y.is.focused()){e.preventDefault();var t=e.which,n=y.is.vertical()?y.is.reversed()?L.downArrow:L.upArrow:L.downArrow,o=y.is.vertical()?y.is.reversed()?L.upArrow:L.downArrow:L.upArrow,i=y.is.vertical()?L.leftArrow:y.is.reversed()?L.rightArrow:L.leftArrow,r=y.is.vertical()?L.rightArrow:y.is.reversed()?L.leftArrow:L.rightArrow;t==n||t==i?y.backStep():t==o||t==r?y.takeStep():t==L.pageDown?y.backStep(A):t==L.pageUp&&y.takeStep(A)}}},takeStep:function(e){var e=e!=o?e:1,t=y.get.step(),n=y.get.value();y.verbose("Taking a step"),t>0&&y.set.positionBasedValue(n+t*e)},backStep:function(e){var e=e!=o?e:1,t=y.get.step(),n=y.get.value();y.verbose("Going back a step"),t>0&&y.set.positionBasedValue(n-t*e)},is:{focused:function(){return O.is(":focus")},disabled:function(){return O.hasClass(P.className.disabled)},labeled:function(){return O.hasClass(P.className.labeled)},reversed:function(){return O.hasClass(P.className.reversed)},vertical:function(){return O.hasClass(P.className.vertical)},touch:function(){return w}},get:{trackOffset:function(){return y.is.vertical()?g.offset().top:g.offset().left},trackLength:function(){return y.is.vertical()?g.height():g.width()},trackLeft:function(){return y.is.vertical()?g.position().top:g.position().left},trackStartPos:function(){return y.is.reversed()?y.get.trackLeft()+y.get.trackLength():y.get.trackLeft()},trackEndPos:function(){return y.is.reversed()?y.get.trackLeft():y.get.trackLeft()+y.get.trackLength()},precision:function(){var e,t=y.get.step();if(0!=t){var n=String(t).split(".");e=2==n.length?n[1].length:0}else e=P.decimalPlaces;var o=Math.pow(10,e);return y.debug("Precision determined",o),o},min:function(){return P.min},max:function(){return P.max},step:function(){return P.step},numLabels:function(){var e=Math.round((y.get.max()-y.get.min())/y.get.step())-2;return y.debug("Determined that their should be "+e+" labels"),e},labelType:function(){return P.labelType},label:function(e){switch(P.labelType){case P.labelTypes.number:return e*y.get.step();case P.labelTypes.letter:return f[e-1];case P.labelTypes.none:return"";default:return e}},trackPos:function(){return y.is.vertical()?y.is.reversed()?y.get.trackLength()-(p.position().top+p.height()):p.position().top:y.is.reversed()?y.get.trackLength()-(p.position().left+p.width()):p.position().left},value:function(){return m}},determine:{pos:function(e){return y.is.reversed()?y.get.trackStartPos()-e+y.get.trackOffset():e-y.get.trackOffset()-y.get.trackStartPos()},positionFromValue:function(e){var t=y.get.min(),n=y.get.max(),o=y.get.trackLength(),i=(e-t)/(n-t),r=y.get.trackPos(),s=Math.round(i*o)+r;return y.verbose("Determined position: "+s+" from value: "+e),s},positionFromRatio:function(e){var t=y.get.trackLength(),n=y.get.trackPos(),o=y.get.step(),i=Math.round(e*t)+n,r=0==o?i:Math.round(i/o)*o;return r},eventPos:function(e,t){return y.is.vertical()?y.is.touch()?t.originalEvent.touches[0].pageY:"undefined"!=typeof e.pageY?e.pageY:t.pageY:y.is.touch()?t.originalEvent.touches[0].pageX:"undefined"!=typeof e.pageX?e.pageX:t.pageX},value:function(e){var t=y.is.reversed()?y.get.trackEndPos():y.get.trackStartPos(),n=y.is.reversed()?y.get.trackStartPos():y.get.trackEndPos(),o=(e-t)/(n-t),i=y.get.max()-y.get.min(),r=y.get.step(),s=o*i,a=0==r?s:Math.round(s/r)*r;return y.verbose("Determined value based upon position: "+e+" as: "+s),s!=a&&y.verbose("Rounding value to closest step: "+a),a=Math.round(a*k)/k,y.verbose("Cutting off additional decimal places"),a-y.get.min()}},set:{value:function(t){T&&e(T).val(t),m=t,P.onChange.call(V,t),y.debug("Setting range value to "+t)},position:function(e){y.is.vertical()?(y.is.reversed()?r.css({bottom:String(e-h)+"px"}):r.css({top:String(e-h)+"px"}),p.css({height:String(e)+"px"})):(y.is.reversed()?r.css({right:String(e-h)+"px"}):r.css({left:String(e-h)+"px"}),p.css({width:String(e)+"px"})),b=e,y.debug("Setting range position to "+e)},positionBasedValue:function(e){var t,n=y.get.min(),o=y.get.max();e>=n&&o>=e?t=y.determine.positionFromValue(e):n>=e?(t=y.determine.positionFromValue(n),e=n):(t=y.determine.positionFromValue(o),e=o),y.set.position(t),y.set.value(e)},valueMoveToValueBasedPosition:function(e){var t,n=y.determine.value(e),o=y.get.min(),i=y.get.max();o>=n?n=o:n>=i&&(n=i),t=y.determine.positionFromValue(n),y.set.value(n),y.set.position(t)},valueBasedPosition:function(e){var t=y.determine.value(e),n=y.get.min(),o=y.get.max();t>=n&&o>=t?y.set.position(e):n>=t?(y["goto"].min(),t=n):(y["goto"].max(),t=o),y.set.value(t)}},"goto":{max:function(){y.set.positionBasedValue(y.get.max())},min:function(){y.set.positionBasedValue(y.get.min())}},read:{metadata:function(){var e={value:O.data(x.value)};e.value&&(y.debug("Current value set from metadata",e.value),y.set.value(e.value),y.set.positionBasedValue(e.value))},settings:function(){P.start!==!1&&(y.debug("Start position set from settings",P.start),y.set.positionBasedValue(P.start))}},setting:function(t,n){if(y.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,P,t);else{if(n===o)return P[t];e.isPlainObject(P[t])?e.extend(!0,P[t],n):P[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,y,t);else{if(n===o)return y[t];y[t]=n}},debug:function(){!P.silent&&P.debug&&(P.performance?y.performance.log(arguments):(y.debug=Function.prototype.bind.call(console.info,console,P.name+":"),y.debug.apply(console,arguments)))},verbose:function(){!P.silent&&P.verbose&&P.debug&&(P.performance?y.performance.log(arguments):(y.verbose=Function.prototype.bind.call(console.info,console,P.name+":"),y.verbose.apply(console,arguments)))},error:function(){P.silent||(y.error=Function.prototype.bind.call(console.error,console,P.name+":"),y.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;P.performance&&(t=(new Date).getTime(),o=a||t,n=t-o,a=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:V,"Execution Time":n})),clearTimeout(y.performance.timer),y.performance.timer=setTimeout(y.performance.display,500)},display:function(){var t=P.name+":",n=0;a=!1,clearTimeout(y.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(console.group!==o||console.table!==o)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,r){var s,a,u,l=F;return n=n||d,r=V||r,"string"==typeof t&&l!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[r])&&n!=s)l=l[r];else{if(l[r]!==o)return a=l[r],!1;if(!e.isPlainObject(l[i])||n==s)return l[i]!==o?(a=l[i],!1):(y.error(S.method,t),!1);l=l[i]}})),e.isFunction(a)?u=a.apply(r,n):a!==o&&(u=a),e.isArray(i)?i.push(u):i!==o?i=[i,u]:u!==o&&(i=u),a}},c?(F===o&&y.initialize(),y.invoke(l)):(F!==o&&F.invoke("destroy"),y.initialize())}),i!==o?i:this},e.fn.range.settings={silent:!1,debug:!1,verbose:!1,performance:!0,name:"Range",namespace:"range",error:{method:"The method you called is not defined."},metadata:{value:"value"},min:0,max:20,step:1,start:0,input:!1,labelType:"number",decimalPlaces:2,pageMultiplier:2,className:{reversed:"reversed",disabled:"disabled",labeled:"labeled",vertical:"vertical"},keys:{pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},labelTypes:{number:"number",none:"none",letter:"letter"},onChange:function(e){}}}(jQuery,window,document);
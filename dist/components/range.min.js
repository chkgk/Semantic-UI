/*!
 * # Range slider for Semantic UI.
 *
 */
!function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.range=function(t){var i,r=e(this),a=r.selector||"",s=(new Date).getTime(),u=[],l=arguments[0],c="string"==typeof l,d=[].slice.call(arguments,1),f=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],v=1,g=2,p=0,m=-1,b=-2;return r.each(function(){var r,h,k,w,y,P,x,E,T,S,L=e.isPlainObject(t)?e.extend(!0,{},e.fn.range.settings,t):e.extend({},e.fn.range.settings),A=(L.className,L.metadata),M=L.namespace,D=L.input,B=L.error,F=L.keys,O=!1,V="."+M,C="module-"+M,N=e(this),j=this,I=N.data(C);S={initialize:function(){S.debug("Initializing range slider",L),T=S.setup.testOutTouch(),S.setup.layout(),S.is.disabled()||S.bind.events(),S.read.metadata(),S.read.settings(),S.instantiate()},instantiate:function(){S.verbose("Storing instance of range",S),I=S,N.data(C,S)},destroy:function(){S.verbose("Destroying previous range for",N),clearInterval(I.interval),S.unbind.events(),S.unbind.slidingEvents(),N.removeData(C),I=o},setup:{layout:function(){N.attr("tabindex")===o&&N.attr("tabindex",0),0==N.find(".inner").length&&N.append("<div class='inner'><div class='track'></div><div class='track-fill'></div><div class='thumb'></div></div>"),E=S.get.precision(),r=N.find(".thumb"),h=N.find(".track"),k=N.find(".track-fill"),x=r.width()/2,S.is.labeled()&&(w=N.find(".labels:not(.auto)"),0!=w.length?S.setup.customLabel():S.setup.autoLabel())},testOutTouch:function(){try{return n.createEvent("TouchEvent"),!0}catch(e){return!1}},customLabel:function(){var t,n,o=w.find(".label"),i=o.length;o.each(function(o){t=(o+1)/(i+1),n=S.determine.positionFromRatio(t);var r=S.is.vertical()?S.is.reversed()?"bottom":"top":S.is.reversed()?"right":"left";e(this).css(r,n)})},autoLabel:function(){if(0!=S.get.step()){w=N.find(".labels"),0!=w.length?w.empty():w=N.append('<ul class="auto labels"></ul>').find(".labels");for(var t=0;t<=S.get.numLabels();t++){var n=e('<li class="label">'+S.get.label(t+1)+"</li>"),o=S.is.vertical()?S.is.reversed()?"bottom":"top":S.is.reversed()?"right":"left";n.css(o,S.determine.positionFromValue((t+1)*S.get.step())),w.append(n)}}}},bind:{events:function(){S.bind.globalKeyboardEvents(),S.bind.keyboardEvents(),S.bind.mouseEvents(),S.is.touch()&&S.bind.touchEvents()},keyboardEvents:function(){S.verbose("Binding keyboard events"),N.on("keydown"+V,S.event.keydown)},globalKeyboardEvents:function(){e(n).on("keydown"+V,S.event.activateFocus)},mouseEvents:function(){S.verbose("Binding mouse events"),N.find(".track, .thumb, .inner").on("mousedown"+V,function(e){e.stopImmediatePropagation(),e.preventDefault(),S.event.down(e)}),N.on("mousedown"+V,S.event.down),N.on("mouseenter"+V,function(e){O=!0}),N.on("mouseleave"+V,function(e){O=!1})},touchEvents:function(){S.verbose("Binding touch events"),N.find(".track, .thumb, .inner").on("touchstart"+V,function(e){e.stopImmediatePropagation(),e.preventDefault(),S.event.down(e)}),N.on("touchstart"+V,S.event.down)},slidingEvents:function(){S.verbose("Binding page wide events while handle is being draged"),S.is.touch()?(e(n).on("touchmove"+V,S.event.move),e(n).on("touchend"+V,S.event.up)):(e(n).on("mousemove"+V,S.event.move),e(n).on("mouseup"+V,S.event.up))}},unbind:{events:function(){N.find(".track, .thumb, .inner").off("mousedown"+V),N.find(".track, .thumb, .inner").off("touchstart"+V),N.off("mousedown"+V),N.off("mouseenter"+V),N.off("mouseleave"+V),N.off("touchstart"+V),N.off("keydown"+V),N.off("focusout"+V)},slidingEvents:function(){S.is.touch()?(e(n).off("touchmove"+V),e(n).off("touchend"+V)):(e(n).off("mousemove"+V),e(n).off("mouseup"+V))}},event:{down:function(e,t){e.preventDefault(),S.is.disabled()||S.bind.slidingEvents()},move:function(e,t){e.preventDefault();var n=S.determine.eventPos(e,t),o=S.determine.pos(n);n>=S.get.trackOffset()&&n<=S.get.trackOffset()+S.get.trackLength()&&S.set.valueBasedPosition(o)},up:function(e,t){e.preventDefault();var n=S.determine.eventPos(e,t),o=S.determine.pos(n);n>=S.get.trackOffset()&&n<=S.get.trackOffset()+S.get.trackLength()&&S.set.valueMoveToValueBasedPosition(o),S.unbind.slidingEvents()},keydown:function(t,o){if(S.is.focused()&&e(n).trigger(t),o||S.is.focused()){var i=S.determine.keyMovement(t);if(i!=p)switch(t.preventDefault(),i){case v:S.takeStep();break;case g:S.takeStep(S.get.multiplier());break;case m:S.backStep();break;case b:S.backStep(S.get.multiplier())}}},activateFocus:function(e){!S.is.focused()&&S.is.hover()&&S.determine.keyMovement(e)!=p&&(e.preventDefault(),S.event.keydown(e,!0),N.focus())}},takeStep:function(e){var e=e!=o?e:1,t=S.get.step(),n=S.get.value();S.verbose("Taking a step"),t>0&&S.set.positionBasedValue(n+t*e)},backStep:function(e){var e=e!=o?e:1,t=S.get.step(),n=S.get.value();S.verbose("Going back a step"),t>0&&S.set.positionBasedValue(n-t*e)},is:{hover:function(){return O},focused:function(){return N.is(":focus")},disabled:function(){return N.hasClass(L.className.disabled)},labeled:function(){return N.hasClass(L.className.labeled)},reversed:function(){return N.hasClass(L.className.reversed)},vertical:function(){return N.hasClass(L.className.vertical)},touch:function(){return T}},get:{trackOffset:function(){return S.is.vertical()?h.offset().top:h.offset().left},trackLength:function(){return S.is.vertical()?h.height():h.width()},trackLeft:function(){return S.is.vertical()?h.position().top:h.position().left},trackStartPos:function(){return S.is.reversed()?S.get.trackLeft()+S.get.trackLength():S.get.trackLeft()},trackEndPos:function(){return S.is.reversed()?S.get.trackLeft():S.get.trackLeft()+S.get.trackLength()},precision:function(){var e,t=S.get.step();if(0!=t){var n=String(t).split(".");e=2==n.length?n[1].length:0}else e=L.decimalPlaces;var o=Math.pow(10,e);return S.debug("Precision determined",o),o},min:function(){return L.min},max:function(){return L.max},step:function(){return L.step},numLabels:function(){var e=Math.round((S.get.max()-S.get.min())/S.get.step())-2;return S.debug("Determined that their should be "+e+" labels"),e},labelType:function(){return L.labelType},label:function(e){switch(L.labelType){case L.labelTypes.number:return e*S.get.step();case L.labelTypes.letter:return f[e-1];case L.labelTypes.none:return"";default:return e}},trackPos:function(){return S.is.vertical()?S.is.reversed()?S.get.trackLength()-(k.position().top+k.height()):k.position().top:S.is.reversed()?S.get.trackLength()-(k.position().left+k.width()):k.position().left},value:function(){return y},multiplier:function(){return L.pageMultiplier}},determine:{pos:function(e){return S.is.reversed()?S.get.trackStartPos()-e+S.get.trackOffset():e-S.get.trackOffset()-S.get.trackStartPos()},positionFromValue:function(e){var t=S.get.min(),n=S.get.max(),o=S.get.trackLength(),i=(e-t)/(n-t),r=S.get.trackPos(),a=Math.round(i*o)+r;return S.verbose("Determined position: "+a+" from value: "+e),a},positionFromRatio:function(e){var t=S.get.trackLength(),n=S.get.trackPos(),o=S.get.step(),i=Math.round(e*t)+n,r=0==o?i:Math.round(i/o)*o;return r},eventPos:function(e,t){return S.is.vertical()?S.is.touch()?t.originalEvent.touches[0].pageY:"undefined"!=typeof e.pageY?e.pageY:t.pageY:S.is.touch()?t.originalEvent.touches[0].pageX:"undefined"!=typeof e.pageX?e.pageX:t.pageX},value:function(e){var t=S.is.reversed()?S.get.trackEndPos():S.get.trackStartPos(),n=S.is.reversed()?S.get.trackStartPos():S.get.trackEndPos(),o=(e-t)/(n-t),i=S.get.max()-S.get.min(),r=S.get.step(),a=o*i,s=0==r?a:Math.round(a/r)*r;return S.verbose("Determined value based upon position: "+e+" as: "+a),a!=s&&S.verbose("Rounding value to closest step: "+s),s=Math.round(s*E)/E,S.verbose("Cutting off additional decimal places"),s-S.get.min()},keyMovement:function(e){var t=e.which,n=S.is.vertical()?S.is.reversed()?F.downArrow:F.upArrow:F.downArrow,o=S.is.vertical()?S.is.reversed()?F.upArrow:F.downArrow:F.upArrow,i=S.is.vertical()?F.leftArrow:S.is.reversed()?F.rightArrow:F.leftArrow,r=S.is.vertical()?F.rightArrow:S.is.reversed()?F.leftArrow:F.rightArrow;return t==n||t==i?m:t==o||t==r?v:t==F.pageDown?b:t==F.pageUp?g:p}},set:{value:function(t){D&&e(D).val(t),y=t,L.onChange.call(j,t),S.debug("Setting range value to "+t)},position:function(e){S.is.vertical()?(S.is.reversed()?r.css({bottom:String(e-x)+"px"}):r.css({top:String(e-x)+"px"}),k.css({height:String(e)+"px"})):(S.is.reversed()?r.css({right:String(e-x)+"px"}):r.css({left:String(e-x)+"px"}),k.css({width:String(e)+"px"})),P=e,S.debug("Setting range position to "+e)},positionBasedValue:function(e){var t,n=S.get.min(),o=S.get.max();e>=n&&o>=e?t=S.determine.positionFromValue(e):n>=e?(t=S.determine.positionFromValue(n),e=n):(t=S.determine.positionFromValue(o),e=o),S.set.position(t),S.set.value(e)},valueMoveToValueBasedPosition:function(e){var t,n=S.determine.value(e),o=S.get.min(),i=S.get.max();o>=n?n=o:n>=i&&(n=i),t=S.determine.positionFromValue(n),S.set.value(n),S.set.position(t)},valueBasedPosition:function(e){var t=S.determine.value(e),n=S.get.min(),o=S.get.max();t>=n&&o>=t?S.set.position(e):n>=t?(S["goto"].min(),t=n):(S["goto"].max(),t=o),S.set.value(t)}},"goto":{max:function(){S.set.positionBasedValue(S.get.max())},min:function(){S.set.positionBasedValue(S.get.min())}},read:{metadata:function(){var e={value:N.data(A.value)};e.value&&(S.debug("Current value set from metadata",e.value),S.set.value(e.value),S.set.positionBasedValue(e.value))},settings:function(){L.start!==!1&&(S.debug("Start position set from settings",L.start),S.set.positionBasedValue(L.start))}},setting:function(t,n){if(S.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,L,t);else{if(n===o)return L[t];e.isPlainObject(L[t])?e.extend(!0,L[t],n):L[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,S,t);else{if(n===o)return S[t];S[t]=n}},debug:function(){!L.silent&&L.debug&&(L.performance?S.performance.log(arguments):(S.debug=Function.prototype.bind.call(console.info,console,L.name+":"),S.debug.apply(console,arguments)))},verbose:function(){!L.silent&&L.verbose&&L.debug&&(L.performance?S.performance.log(arguments):(S.verbose=Function.prototype.bind.call(console.info,console,L.name+":"),S.verbose.apply(console,arguments)))},error:function(){L.silent||(S.error=Function.prototype.bind.call(console.error,console,L.name+":"),S.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;L.performance&&(t=(new Date).getTime(),o=s||t,n=t-o,s=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":n})),clearTimeout(S.performance.timer),S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var t=L.name+":",n=0;s=!1,clearTimeout(S.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(console.group!==o||console.table!==o)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,r){var a,s,u,l=I;return n=n||d,r=j||r,"string"==typeof t&&l!==o&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,i){var r=n!=a?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[r])&&n!=a)l=l[r];else{if(l[r]!==o)return s=l[r],!1;if(!e.isPlainObject(l[i])||n==a)return l[i]!==o?(s=l[i],!1):(S.error(B.method,t),!1);l=l[i]}})),e.isFunction(s)?u=s.apply(r,n):s!==o&&(u=s),e.isArray(i)?i.push(u):i!==o?i=[i,u]:u!==o&&(i=u),s}},c?(I===o&&S.initialize(),S.invoke(l)):(I!==o&&I.invoke("destroy"),S.initialize())}),i!==o?i:this},e.fn.range.settings={silent:!1,debug:!1,verbose:!1,performance:!0,name:"Range",namespace:"range",error:{method:"The method you called is not defined."},metadata:{value:"value"},min:0,max:20,step:1,start:0,input:!1,labelType:"number",decimalPlaces:2,pageMultiplier:2,className:{reversed:"reversed",disabled:"disabled",labeled:"labeled",vertical:"vertical"},keys:{pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},labelTypes:{number:"number",none:"none",letter:"letter"},onChange:function(e){}}}(jQuery,window,document);
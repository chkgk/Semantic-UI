/*!
 * # Range slider for Semantic UI.
 *
 */
!function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.range=function(t){var i,a=e(this),s=a.selector||"",r=(new Date).getTime(),u=[],c=arguments[0],m="string"==typeof c,l=[].slice.call(arguments,1);return a.each(function(){var a,d,f,g,p,v,h,b=e.isPlainObject(t)?e.extend(!0,{},e.fn.range.settings,t):e.extend({},e.fn.range.settings),x=(b.className,b.metadata),k=b.namespace,P=(b.start,b.input),w=b.error,y="."+k,E="module-"+k,T=e(this),C=this,S=T.data(E),D=T.hasClass(b.className.reversed);h={initialize:function(){h.debug("Initializing range slider",b),v=h.get.isTouch(),h.setup.layout(),h.bind.events(),h.read.metadata(),h.read.settings(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of range",h),S=h,T.data(E,h)},destroy:function(){h.verbose("Destroying previous range for",T),clearInterval(S.interval),h.unbind.events(),h.unbind.documentEvents(),T.removeData(E),S=o},setup:{layout:function(){T.html("<div class='inner'><div class='track'></div><div class='track-fill'></div><div class='thumb'></div></div>"),p=h.get.precision(),a=T.find(".thumb"),d=T.find(".track"),f=T.find(".track-fill"),g=a.width()/2}},bind:{events:function(){T.find(".track, .thumb, .inner").on("mousedown",function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).closest(".range").trigger("mousedown",t),h.event.down(t)}),T.find(".track, .thumb, .inner").on("touchstart",function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).closest(".range").trigger("touchstart",t),h.event.down(t)}),T.on("mousedown"+y,h.event.down),T.on("touchstart"+y,h.event.down)},documentEvents:function(){h.get.isTouch()?(e(n).on("touchmove"+y,h.event.move),e(n).on("touchend"+y,h.event.up)):(e(n).on("mousemove"+y,h.event.move),e(n).on("mouseup"+y,h.event.up))}},unbind:{events:function(){T.find(".track, .thumb, .inner").off("mousedown",function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).closest(".range").trigger("mousedown",t),h.event.mousedown(t)}),T.find(".track, .thumb, .inner").off("touchstart",function(t){t.stopImmediatePropagation(),t.preventDefault(),e(this).closest(".range").trigger("touchstart",t),h.event.touchstart(t)}),T.off("mousedown"+y,h.event.down),T.off("touchstart"+y,h.event.down)},documentEvents:function(){h.get.isTouch()?(e(n).off("touchmove"+y,h.event.move),e(n).off("touchend"+y,h.event.up)):(e(n).off("mousemove"+y,h.event.move),e(n).off("mouseup"+y,h.event.up))}},event:{down:function(e,t){e.preventDefault(),h.bind.documentEvents()},move:function(e,t){e.preventDefault();var n=h.determine.eventXPos(e,t),o=h.determine.pos(n);n>=h.get.trackOffset()&&n<=h.get.trackOffset()+h.get.trackWidth()&&h.set.valueBasedPosition(o)},up:function(e,t){e.preventDefault();var n=h.determine.eventXPos(e,t),o=h.determine.pos(n);n>=h.get.trackOffset()&&n<=h.get.trackOffset()+h.get.trackWidth()&&h.set.valueMoveToValueBasedPosition(o),h.unbind.documentEvents()}},get:{isTouch:function(){try{return n.createEvent("TouchEvent"),!0}catch(e){return!1}},trackOffset:function(){return d.offset().left},trackWidth:function(){return d.width()},trackLeft:function(){return d.position().left},trackStartPos:function(){return D?h.get.trackLeft()+h.get.trackWidth():h.get.trackLeft()},trackEndPos:function(){return D?h.get.trackLeft():h.get.trackLeft()+h.get.trackWidth()},precision:function(){var e,t=h.get.step();if(0!=t){var n=String(t).split(".");e=2==n.length?n[1].length:0}else e=b.decimalPlaces;var o=Math.pow(10,e);return h.debug("Precision determined",o),o},min:function(){return h.min||b.min},max:function(){return h.max||b.max},step:function(){return h.step||b.step}},determine:{pos:function(e){return D?h.get.trackStartPos()-e+h.get.trackOffset():e-h.get.trackOffset()-h.get.trackStartPos()},value:function(e){var t=D?h.get.trackEndPos():h.get.trackStartPos(),n=D?h.get.trackStartPos():h.get.trackEndPos(),o=(e-t)/(n-t),i=h.get.max()-h.get.min(),a=h.get.step(),s=o*i,r=0==a?s:Math.round(s/a)*a;return h.verbose("Determined value based upon position: "+e+" as: "+s),s!=r&&h.verbose("Rounding value to closest step: "+r),r=Math.round(r*p)/p,h.verbose("Cutting "),r-h.get.min()},positionFromValue:function(e){var t=h.get.min(),n=h.get.max(),o=h.get.trackWidth(),i=(e-t)/(n-t),a=D?o-(f.position().left+f.width()):f.position().left,s=Math.round(i*o)+a;return h.verbose("Determined position: "+s+" from value: "+e),s},eventXPos:function(e,t){return v?t.originalEvent.touches[0].pageX:"undefined"!=typeof e.pageX?e.pageX:t.pageX}},set:{value:function(t){P&&e(P).val(t),b.onChange.call(C,t),h.debug("Setting range value to "+t)},max:function(e){h.max=e},min:function(e){h.min=e},step:function(e){h.step=e},position:function(e){D?a.css({right:String(e-g)+"px"}):a.css({left:String(e-g)+"px"}),f.css({width:String(e)+"px"}),h.position=e,h.debug("Setting range position to "+e)},positionBasedValue:function(e){var t=h.get.min(),n=h.get.max();if(e>=t&&n>=e){var o=h.determine.positionFromValue(e);h.set.position(o),h.set.value(e)}else t>=e?(h["goto"].min(),h.set.value(t)):(h["goto"].max(),h.set.value(n))},valueMoveToValueBasedPosition:function(e){var t,n=h.determine.value(e),o=h.get.min(),i=h.get.max();o>=n?n=o:n>=i&&(n=i),t=h.determine.positionFromValue(n),h.set.value(n),h.set.position(t)},valueBasedPosition:function(e){var t=h.determine.value(e),n=h.get.min(),o=h.get.max();t>=n&&o>=t?h.set.position(e):n>=t?(h["goto"].min(),t=n):(h["goto"].max(),t=o),h.set.value(t)}},"goto":{max:function(){h.set.position(h.get.trackEndPos())},min:function(){h.set.position(h.get.trackStartPos())}},remove:{state:function(){h.verbose("Removing stored state"),delete h.min,delete h.max,delete h.value,delete h.position}},read:{metadata:function(){var e={value:T.data(x.value),min:T.data(x.min),max:T.data(x.max),step:T.data(x.step)};e.value&&(h.debug("Current value set from metadata",e.value),h.set.value(e.value),h.set.positionBasedValue(e.value)),e.min&&(h.debug("Current min set from metadata",e.min),h.set.value(e.min),h.set.positionBasedValue(e.min)),e.max&&(h.debug("Current max set from metadata",e.max),h.set.value(e.max),h.set.positionBasedValue(e.max)),e.step&&(h.debug("Current step set from metadata",e.step),h.set.value(e.step),h.set.positionBasedValue(e.step))},settings:function(){b.min!==!1&&(h.debug("Current min set in settings",b.min),h.set.min(b.min)),b.max!==!1&&(h.debug("Current max set from settings",b.max),h.set.max(b.max)),b.step!==!1&&(h.debug("Current step set from settings",b.step),h.set.step(b.step)),b.start!==!1&&(h.debug("Start position set from settings",b.start),h.set.positionBasedValue(b.start))}},setting:function(t,n){if(h.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,b,t);else{if(n===o)return b[t];e.isPlainObject(b[t])?e.extend(!0,b[t],n):b[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(n===o)return h[t];h[t]=n}},debug:function(){!b.silent&&b.debug&&(b.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,b.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!b.silent&&b.verbose&&b.debug&&(b.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,b.name+":"),h.verbose.apply(console,arguments)))},error:function(){b.silent||(h.error=Function.prototype.bind.call(console.error,console,b.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;b.performance&&(t=(new Date).getTime(),o=r||t,n=t-o,r=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":n})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var t=b.name+":",n=0;r=!1,clearTimeout(h.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(console.group!==o||console.table!==o)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,a){var s,r,u,c=S;return n=n||l,a=C||a,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var a=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[a])&&n!=s)c=c[a];else{if(c[a]!==o)return r=c[a],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(r=c[i],!1):(h.error(w.method,t),!1);c=c[i]}})),e.isFunction(r)?u=r.apply(a,n):r!==o&&(u=r),e.isArray(i)?i.push(u):i!==o?i=[i,u]:u!==o&&(i=u),r}},m?(S===o&&h.initialize(),h.invoke(c)):(S!==o&&S.invoke("destroy"),h.initialize())}),i!==o?i:this},e.fn.range.settings={silent:!1,debug:!1,verbose:!1,performance:!0,name:"Range",namespace:"range",error:{method:"The method you called is not defined."},metadata:{value:"value",min:"min",max:"max",step:"step"},min:0,max:20,step:1,start:0,input:!1,decimalPlaces:2,className:{reversed:"reversed"},onChange:function(e){}}}(jQuery,window,document);